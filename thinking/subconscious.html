<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å…³äºæ½œæ„è¯† - Cosmos of WW</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Georgia', serif;
      line-height: 1.6;
      color: #000;
      background: #FAFAFA;
      min-height: 100vh;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('../assets/images/logo.svg');
      background-repeat: no-repeat;
      background-position: right bottom;
      background-size: 400px;
      opacity: 0.03;
      pointer-events: none;
      z-index: -1;
    }

    /* Header */
    header {
      background: #FFFFFF;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      padding: 20px 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo-container {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 4px;
    }

    .logo-text-container {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .logo-text {
      font-size: 1.8em;
      font-weight: 700;
      color: #000;
      font-family: 'Georgia', serif;
      line-height: 1.2;
    }

    .logo-subtitle {
      font-size: 0.9em;
      font-weight: 400;
      color: #666;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      line-height: 1.2;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 30px;
      align-items: center;
    }

    /* è®¤è¯ UI */
    .auth-container {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .auth-user {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.9em;
    }

    .auth-user img {
      width: 24px;
      height: 24px;
      border-radius: 50%;
    }

    .auth-btn {
      padding: 6px 12px;
      border: 1px solid rgba(0, 0, 0, 0.2);
      background: transparent;
      color: #000;
      font-size: 0.9em;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.2s;
      font-family: inherit;
    }

    .auth-btn:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .role-badge {
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.75em;
      font-weight: 500;
    }

    .role-badge.admin {
      background: #28a745;
      color: white;
    }

    .role-badge.guest {
      background: #6c757d;
      color: white;
    }

    /* æƒé™æ§åˆ¶ï¼šåªè¯»æ¨¡å¼ */
    .read-only input,
    .read-only select,
    .read-only textarea {
      pointer-events: none;
      background: #f5f5f5;
      color: #666;
    }

    .read-only button.admin-only {
      display: none;
    }

    nav a {
      color: #000;
      text-decoration: none;
      font-size: 0.95em;
      font-weight: 400;
      transition: opacity 0.2s;
    }

    nav a:hover {
      opacity: 0.7;
    }

    nav a.active {
      opacity: 0.5;
    }

    #lang-switcher {
      padding: 6px 30px 6px 12px;
      border: 1px solid rgba(0, 0, 0, 0.2);
      border-radius: 4px;
      background: #FFFFFF;
      color: #000;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23000' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 8px center;
      background-size: 12px;
    }

    #lang-switcher:hover {
      background-color: rgba(0, 0, 0, 0.05);
      border-color: rgba(0, 0, 0, 0.3);
    }

    #lang-switcher:focus {
      outline: none;
      border-color: rgba(0, 0, 0, 0.4);
    }

    /* Main Content */
    main {
      max-width: 800px;
      margin: 0 auto;
      padding: 80px 40px;
    }

    .intro-section h1 {
      font-size: 3.5em;
      font-weight: 400;
      line-height: 1.2;
      margin-bottom: 50px;
      font-family: 'Georgia', serif;
      color: #000;
    }

    .intro-section p {
      font-size: 1.1em;
      color: #333;
      line-height: 1.9;
      margin-bottom: 25px;
    }

    .intro-section h2 {
      font-size: 1.8em;
      font-weight: 400;
      margin-top: 50px;
      margin-bottom: 25px;
      font-family: 'Georgia', serif;
      color: #000;
    }

    .intro-section h3 {
      font-size: 1.4em;
      font-weight: 400;
      margin-top: 35px;
      margin-bottom: 20px;
      font-family: 'Georgia', serif;
      color: #000;
    }

    .intro-section h4 {
      font-size: 1.2em;
      font-weight: 400;
      margin-top: 25px;
      margin-bottom: 15px;
      font-family: 'Georgia', serif;
      color: #000;
    }

    .intro-section ul {
      list-style: none;
      padding-left: 0;
      margin: 20px 0;
    }

    .intro-section ul li {
      padding: 8px 0;
      padding-left: 25px;
      position: relative;
      color: #333;
      line-height: 1.8;
    }

    .intro-section ul li:before {
      content: "â€¢";
      position: absolute;
      left: 0;
      color: #000;
    }

    .intro-section ol {
      padding-left: 30px;
      margin: 20px 0;
    }

    .intro-section ol li {
      padding: 8px 0;
      color: #333;
      line-height: 1.8;
    }

    .intro-section hr {
      border: none;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      margin: 30px 0;
    }

    .intro-section strong {
      font-weight: 600;
      color: #000;
    }

    /* ç›®å½•æ ·å¼ */
    .table-of-contents {
      background: rgba(0, 0, 0, 0.02);
      border-left: 3px solid rgba(0, 0, 0, 0.2);
      padding: 25px 30px;
      margin: 40px 0;
      border-radius: 0 4px 4px 0;
    }

    .table-of-contents h2 {
      font-size: 1.3em;
      margin-top: 0;
      margin-bottom: 20px;
      font-family: 'Georgia', serif;
      color: #000;
    }

    .table-of-contents ul {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    .table-of-contents > ul {
      margin-left: 0;
    }

    .table-of-contents ul ul {
      margin-left: 20px;
      margin-top: 8px;
    }

    .table-of-contents li {
      padding: 6px 0;
      padding-left: 0;
      position: relative;
    }

    .table-of-contents li:before {
      display: none;
    }

    .table-of-contents a {
      color: #333;
      text-decoration: none;
      font-size: 0.95em;
      transition: opacity 0.2s;
      display: inline-block;
    }

    .table-of-contents a:hover {
      opacity: 0.6;
      text-decoration: underline;
    }

    .table-of-contents .toc-h2 {
      font-weight: 500;
      margin-top: 12px;
    }

    .table-of-contents .toc-h2:first-child {
      margin-top: 0;
    }

    .table-of-contents .toc-h3 {
      font-weight: 400;
      color: #666;
      font-size: 0.9em;
    }

    .table-of-contents .toc-h4 {
      font-weight: 400;
      color: #888;
      font-size: 0.85em;
    }

    /* å¹³æ»‘æ»šåŠ¨ */
    html {
      scroll-behavior: smooth;
    }

    /* æ ‡é¢˜é”šç‚¹åç§»ï¼ˆå› ä¸º sticky headerï¼‰ */
    .intro-section h2[id],
    .intro-section h3[id],
    .intro-section h4[id] {
      scroll-margin-top: 100px;
    }

    /* è¿½è¸ªè¡¨æ ¼æ ·å¼ */
    .tracking-table-container {
      margin: 40px 0;
      overflow-x: auto;
    }

    .tracking-table {
      width: 100%;
      border-collapse: collapse;
      border: 1px solid rgba(0, 0, 0, 0.1);
      background: #fff;
      font-size: 0.9em;
    }

    .tracking-table th {
      background: rgba(0, 0, 0, 0.05);
      padding: 12px 8px;
      text-align: left;
      font-weight: 600;
      color: #000;
      border: 1px solid rgba(0, 0, 0, 0.1);
      white-space: nowrap;
    }

    .tracking-table td {
      padding: 10px 8px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      vertical-align: top;
    }

    .tracking-table tr:nth-child(even) {
      background: rgba(0, 0, 0, 0.02);
    }

    .tracking-table input[type="date"],
    .tracking-table input[type="text"],
    .tracking-table textarea {
      width: 100%;
      border: 1px solid rgba(0, 0, 0, 0.2);
      padding: 6px 8px;
      font-size: 0.9em;
      font-family: inherit;
      background: #fff;
      border-radius: 3px;
    }

    .tracking-table input[type="date"] {
      cursor: pointer;
    }

    .tracking-table input[type="text"]:focus,
    .tracking-table textarea:focus,
    .tracking-table input[type="date"]:focus {
      outline: none;
      border-color: rgba(0, 0, 0, 0.4);
    }

    .tracking-table textarea {
      resize: vertical;
      min-height: 60px;
    }

    .tracking-table .yes-no-group {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .tracking-table .yes-no-group label {
      display: flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      font-size: 0.9em;
    }

    .tracking-table .yes-no-group input[type="radio"] {
      width: auto;
      margin: 0;
      cursor: pointer;
    }

    .tracking-table .delete-btn {
      background: rgba(255, 0, 0, 0.1);
      color: #d00;
      border: 1px solid rgba(255, 0, 0, 0.3);
      padding: 4px 8px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 0.85em;
      transition: all 0.2s;
    }

    .tracking-table .delete-btn:hover {
      background: rgba(255, 0, 0, 0.2);
      border-color: rgba(255, 0, 0, 0.5);
    }

    .tracking-table-actions {
      margin-top: 20px;
      display: flex;
      gap: 10px;
    }

    .tracking-table-actions button {
      background: #000;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.95em;
      font-family: inherit;
      transition: opacity 0.2s;
    }

    .tracking-table-actions button:hover {
      opacity: 0.8;
    }

    .tracking-table-actions .add-btn {
      background: #000;
    }

    .tracking-table-actions .preview-btn {
      background: rgba(0, 0, 0, 0.1);
      color: #000;
    }

    .tracking-table-actions .preview-btn:hover {
      background: rgba(0, 0, 0, 0.2);
    }

    .tracking-table-actions .save-btn {
      background: #000;
      color: #fff;
    }

    .tracking-table-actions .show-more-btn {
      background: rgba(0, 0, 0, 0.1);
      color: #000;
    }

    .tracking-table-actions .show-more-btn:hover {
      background: rgba(0, 0, 0, 0.2);
    }

    /* æŠ˜å è¡Œæ ·å¼ */
    .tracking-table tbody tr.hidden-row {
      display: none;
    }

    /* é¢„è§ˆæ¨¡æ€æ¡†æ ·å¼ */
    .preview-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .preview-modal.active {
      display: flex;
    }

    .preview-modal-content {
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
      width: 90%;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .preview-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .preview-modal-header h3 {
      font-size: 1.5em;
      font-weight: 400;
      margin: 0;
      font-family: 'Georgia', serif;
    }

    .preview-modal-close {
      background: none;
      border: none;
      font-size: 1.5em;
      cursor: pointer;
      color: #666;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .preview-modal-close:hover {
      color: #000;
    }

    .preview-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    .preview-table th,
    .preview-table td {
      padding: 12px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      text-align: left;
    }

    .preview-table th {
      background: rgba(0, 0, 0, 0.05);
      font-weight: 600;
    }

    .preview-table tr:nth-child(even) {
      background: rgba(0, 0, 0, 0.02);
    }

    .preview-modal-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
    }

    .preview-modal-actions button {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.95em;
      font-family: inherit;
      transition: opacity 0.2s;
    }

    .preview-modal-actions .confirm-btn {
      background: #000;
      color: #fff;
    }

    .preview-modal-actions .confirm-btn:hover {
      opacity: 0.8;
    }

    .preview-modal-actions .cancel-btn {
      background: rgba(0, 0, 0, 0.1);
      color: #000;
    }

    .preview-modal-actions .cancel-btn:hover {
      background: rgba(0, 0, 0, 0.2);
    }

    @media (max-width: 768px) {
      .tracking-table-container {
        overflow-x: scroll;
      }

      .tracking-table {
        min-width: 800px;
      }

      .tracking-table th,
      .tracking-table td {
        padding: 8px 6px;
        font-size: 0.85em;
      }
    }

    .back-link {
      display: inline-block;
      margin-top: 50px;
      color: #000;
      text-decoration: underline;
      font-size: 1em;
      font-weight: 400;
    }

    .back-link:hover {
      opacity: 0.7;
    }

    /* Footer */
    footer {
      background: #FFFFFF;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      padding: 40px 0;
      margin-top: 80px;
      text-align: center;
    }

    footer p {
      color: #666;
      font-size: 0.9em;
    }

    @media (max-width: 768px) {
      .header-container {
        padding: 0 20px;
        flex-direction: column;
        gap: 15px;
      }

      nav ul {
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
      }

      main {
        padding: 60px 20px;
      }

      .intro-section h1 {
        font-size: 2.5em;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <div class="logo-container">
        <a href="../index.html">
          <div class="logo-text-container">
            <div class="logo-text">Cosmos of WW</div>
            <div class="logo-subtitle">Along with Probability</div>
          </div>
        </a>
      </div>
      <nav>
        <ul>
          <li><a href="../index.html">é¦–é¡µ</a></li>
          <li><a href="../about/">å…³äºæˆ‘</a></li>
          <li><a href="../investment/">æŠ•èµ„è®°å½•</a></li>
          <li><a href="../thinking/">æ€ç»´æ¼«æ­¥</a></li>
          <li>
            <select id="lang-switcher">
              <option value="traditional">ç¹é«”ä¸­æ–‡</option>
              <option value="simplified">ç®€ä½“ä¸­æ–‡</option>
            </select>
          </li>
        </ul>
      </nav>
      <div class="auth-container" id="authContainer">
        <button class="auth-btn" id="loginBtn" onclick="auth.loginWithGitHub()">GitHub ç™»å½•</button>
        <div class="auth-user" id="userInfo" style="display: none;">
          <img id="userAvatar" src="" alt="">
          <span id="userName"></span>
          <span class="role-badge" id="roleBadge"></span>
          <button class="auth-btn" id="toggleModeBtn" onclick="auth.toggleViewMode()" style="display: none;">åˆ‡æ¢åˆ°è®¿å®¢æ¨¡å¼</button>
          <button class="auth-btn" onclick="auth.logout()">ç™»å‡º</button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section class="intro-section">
      <h1>å…³äºæ½œæ„è¯†</h1>

      <div class="table-of-contents">
        <h2>ç›®å½•</h2>
        <ul>
          <li class="toc-h2"><a href="#problem-description">é—®é¢˜æè¿°</a></li>
          <li class="toc-h2"><a href="#phenomenon-analysis">ç°è±¡åˆ†æ</a>
            <ul>
              <li class="toc-h3"><a href="#what-is-this">ä¸€ã€è¿™åˆ°åº•æ˜¯ä¸€ç§ä»€ä¹ˆç°è±¡ï¼Ÿ</a></li>
              <li class="toc-h3"><a href="#scientific-explanation">äºŒã€ç§‘å­¦è§£é‡Šï¼šä½ çš„å¤§è„‘åœ¨"æŠ¢è·‘"ï¼Œä½†æ„è¯†æ²¡è·Ÿä¸Š</a>
                <ul>
                  <li class="toc-h4"><a href="#system1">1ï¸âƒ£ æ½œæ„è¯†ï¼ˆSystem 1ï¼‰å…ˆäºæ„è¯†åšå‡ºåˆ¤æ–­</a></li>
                  <li class="toc-h4"><a href="#working-memory">2ï¸âƒ£ å·¥ä½œè®°å¿†å¸¦å®½ä¸è¶³ï¼ˆç¬é—´æƒ³æ³•è¢«æŒ¤æ‰ï¼‰</a></li>
                  <li class="toc-h4"><a href="#self-inhibition">3ï¸âƒ£ è‡ªæˆ‘æŠ‘åˆ¶æœºåˆ¶è¿‡å¼ºï¼ˆå°¤å…¶å¸¸è§äºå·¥ä½œåœºæ™¯ï¼‰</a></li>
                </ul>
              </li>
              <li class="toc-h3"><a href="#why-afterwards">ä¸‰ã€ä¸ºä»€ä¹ˆä½ "äº‹ååè€Œèƒ½æƒ³åˆ°"ï¼Ÿ</a></li>
            </ul>
          </li>
          <li class="toc-h2"><a href="#solutions">è§£å†³æ–¹æ¡ˆ</a>
            <ul>
              <li class="toc-h3"><a href="#stage1">ä¸€ã€ç¬¬ä¸€é˜¶æ®µï¼ˆç¬¬ 1â€“2 å‘¨ï¼‰</a></li>
              <li class="toc-h3"><a href="#stage2">äºŒã€ç¬¬äºŒé˜¶æ®µï¼ˆç¬¬ 3â€“4 å‘¨ï¼‰</a></li>
              <li class="toc-h3"><a href="#stage3">ä¸‰ã€ç¬¬ä¸‰é˜¶æ®µï¼ˆç¬¬ 5â€“6 å‘¨ï¼‰</a></li>
              <li class="toc-h3"><a href="#stage4">å››ã€ç¬¬å››é˜¶æ®µï¼ˆç¬¬ 7â€“8 å‘¨ï¼‰</a></li>
              <li class="toc-h3"><a href="#core-action">äº”ã€è´¯ç©¿å…¨ç¨‹çš„ä¸€ä¸ªæ ¸å¿ƒåŠ¨ä½œï¼ˆéå¸¸é‡è¦ï¼‰</a></li>
              <li class="toc-h3"><a href="#priority">å…­ã€å¦‚æœä½ åªèƒ½åšä¸€åŠï¼Œä¼˜å…ˆé¡ºåºæ˜¯è¿™ä¸ª</a></li>
              <li class="toc-h3"><a href="#final-words">æœ€åæˆ‘æƒ³å¯¹ä½ è¯´ä¸€å¥å®è¯</a></li>
            </ul>
          </li>
          <li class="toc-h2"><a href="#plans">æˆ‘çš„åç»­è®¡åˆ’</a></li>
        </ul>
      </div>
      <h2 id="problem-description">é—®é¢˜æè¿°</h2>
      <p>æˆ‘æ—¶å¸¸ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šç”Ÿæ´»ä¸­ï¼Œå½“æˆ‘åšæŸå„æŠ‰æ‹©çš„æ—¶å€™ï¼Œå†…å¿ƒéšçº¦ä¼šæœ‰ä¸ªå£°éŸ³ï¼Œè¿™ä¸ªæŠ‰æ‹©å¯èƒ½æ˜¯æœ‰é—®é¢˜çš„ã€‚ä½†å¯èƒ½æ˜¯å› ä¸ºåˆ«äººå·²ç»ä¸ƒå˜´å…«èˆŒçš„è¯´äº†å¾ˆå¤šï¼Œè®©æˆ‘è§‰å¾—æ‹’ç»åˆ«äººå¾ˆä¸å¥½æ„æ€ã€‚æœ€ç»ˆå¯¼è‡´ä½¿å¾—è‡ªå·±å—åˆ°éå¸¸ä¸¥é‡çš„æŸå¤±ã€‚</p>

      <p>å†æ¯”å¦‚ï¼Œåœ¨å·¥ä½œä¸­ï¼Œå’Œåˆ«äººè®¨è®ºä¸€ä»¶äº‹æƒ…çš„æ—¶å€™ï¼Œæœ‰äº›ç‚¹ï¼Œæˆ‘å†…å¿ƒä¼šä¸€é—ªè€Œè¿‡ï¼Œä½†æœ‰æ—¶å€™æ˜¯å› ä¸ºè¿™ä¸ªæ–¹æ³•ä¹‹åå¿˜æ‰ï¼Œæœ‰æ—¶å€™æ˜¯å› ä¸ºè‡ªå·±è§‰å¾—æ²¡é‚£ä¹ˆé‡è¦ï¼Œæˆ‘æ²¡å…ˆæåˆ°é‚£ä¸ªç‚¹ï¼Œä¹‹ååè€Œè®©å¯¹æ–¹æå‡ºï¼Œè¿™æ ·æ˜¾å¾—æˆ‘éå¸¸è¢«åŠ¨ã€‚</p>

      <p>å¦‚æ­¤ç§ç§å§ã€‚</p>

      <p>è¿™æ ·ï¼Œæœ¬æ¥è‡ªå·±æ˜¯èƒ½å¤Ÿå®Œå…¨é¿å…çš„æŸå¤±å’Œå°´å°¬ï¼Œå› ä¸ºè‡ªå·±æ²¡æŠŠæ¡ä½æ½œæ„è¯†é‡Œçš„æ„æ€è‡ªæˆ‘æé†’ã€æš—ç¤ºï¼Œæœ€ç»ˆè’™å—æŸå¤±æˆ–è€…é­é‡å°´å°¬ã€‚</p>

      <p>æˆ‘æƒ³å¯¹è¿™ä¸ªç°è±¡ï¼Œåšä¸ªæ¢ç´¢ï¼›ä¹Ÿæƒ³å¯¹è¿™ä¸ªé—®é¢˜ï¼Œæƒ³ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p>

      <h2 id="phenomenon-analysis">ç°è±¡åˆ†æ</h2>

      <p>è¿™ä¸ªåˆ†æï¼Œæ˜¯GPTç»™å‡ºçš„ï¼Œæˆ‘å°±ç›´æ¥å¤åˆ¶è¿‡æ¥äº†ã€‚</p>

      <hr>

      <h3 id="what-is-this">ä¸€ã€è¿™åˆ°åº•æ˜¯ä¸€ç§ä»€ä¹ˆç°è±¡ï¼Ÿ</h3>

      <p>ä½ æè¿°çš„æ ¸å¿ƒç‰¹å¾æœ‰ä¸‰ç‚¹ï¼š</p>

      <ul>
        <li>"æˆ‘éšçº¦çŸ¥é“ä¸å¯¹/æœ‰æ›´å¥½çš„è¯´æ³•ï¼Œä½†ä¸€é—ªè€Œè¿‡"</li>
        <li>æ„è¯†å±‚è¿˜æ²¡æ¥å¾—åŠåŠ å·¥ï¼Œå†³å®šæˆ–è¡¨è¾¾å·²ç»å‘ç”Ÿ</li>
        <li>äº‹åå›çœ‹ï¼Œå‘ç°å½“æ—¶å…¶å®"å·²ç»æƒ³åˆ°è¿‡"</li>
      </ul>

      <p>è¿™ä¸æ˜¯æƒ³è±¡ï¼Œä¹Ÿä¸æ˜¯å¥å¿˜ï¼Œè€Œæ˜¯å‡ ç§æœºåˆ¶å åŠ çš„ç»“æœã€‚</p>

      <hr>

      <h3 id="scientific-explanation">äºŒã€ç§‘å­¦è§£é‡Šï¼šä½ çš„å¤§è„‘åœ¨"æŠ¢è·‘"ï¼Œä½†æ„è¯†æ²¡è·Ÿä¸Š</h3>

      <h4 id="system1">1ï¸âƒ£ æ½œæ„è¯†ï¼ˆSystem 1ï¼‰å…ˆäºæ„è¯†åšå‡ºåˆ¤æ–­</h4>

      <p>å¿ƒç†å­¦å®¶å¡å°¼æ›¼æå‡º"åŒç³»ç»Ÿç†è®º"ï¼š</p>

      <ul>
        <li><strong>ç³»ç»Ÿ1ï¼ˆæ½œæ„è¯†ï¼‰</strong><br>å¿«é€Ÿã€ç›´è§‰ã€æƒ…å¢ƒåŒ–ã€æ¨¡å¼è¯†åˆ«<br>ğŸ‘‰ ä½ è¯´çš„"éšçº¦è§‰å¾—ä¸å¯¹""æ›´å¥½çš„è¡¨è¾¾æ–¹å¼"ï¼Œå°±åœ¨è¿™é‡Œ</li>
        <li><strong>ç³»ç»Ÿ2ï¼ˆæ„è¯†ï¼‰</strong><br>æ…¢ã€ç†æ€§ã€è¯­è¨€åŒ–ã€éœ€è¦èƒ½é‡<br>ğŸ‘‰ ä½ æ¥ä¸åŠæŠŠå®ƒ"ç¿»è¯‘æˆè¯­è¨€æˆ–è¡ŒåŠ¨"</li>
      </ul>

      <p><strong>ğŸ“Œ å…³é”®ç‚¹ï¼š</strong>ä¸æ˜¯ä½ æ²¡æƒ³åˆ°ï¼Œè€Œæ˜¯æ²¡æ¥å¾—åŠ"ä¸Šæµ®"åˆ°æ„è¯†å±‚</p>

      <hr>

      <h4 id="working-memory">2ï¸âƒ£ å·¥ä½œè®°å¿†å¸¦å®½ä¸è¶³ï¼ˆç¬é—´æƒ³æ³•è¢«æŒ¤æ‰ï¼‰</h4>

      <p>ä½ çš„å¤§è„‘åŒæ—¶åœ¨åšå‡ ä»¶äº‹ï¼š</p>

      <ul>
        <li>ç»´æŒç¤¾äº¤å‹åŠ›ï¼ˆåˆ«è¯´é”™è¯ï¼‰</li>
        <li>è¯„ä¼°é£é™©ï¼ˆè¿™æ ·è¯´éº»ä¸éº»çƒ¦ï¼‰</li>
        <li>å¤„ç†å¤–éƒ¨ä¿¡æ¯ï¼ˆå¯¹æ–¹åœ¨è¯´ä»€ä¹ˆï¼‰</li>
      </ul>

      <p>è€Œçµæ„Ÿã€ç›´è§‰ã€å¾®å¦™åˆ¤æ–­æœ¬èº«æ˜¯ææ˜“æŒ¥å‘çš„ï¼Œå¦‚æœæ²¡æœ‰è¢«è¿…é€Ÿ"æŠ“ä½"ï¼Œå°±ä¼šè¢«æŒ¤æ‰ã€‚</p>

      <p>å°±åƒä½ åœ¨æ¢¦é‡Œæƒ³åˆ°ä¸€ä¸ªæå¥½çš„ç‚¹å­ï¼Œä½†é†’æ¥ 5 ç§’åå°±æ¶ˆå¤±ã€‚</p>

      <hr>

      <h4 id="self-inhibition">3ï¸âƒ£ è‡ªæˆ‘æŠ‘åˆ¶æœºåˆ¶è¿‡å¼ºï¼ˆå°¤å…¶å¸¸è§äºå·¥ä½œåœºæ™¯ï¼‰</h4>

      <p>ä½ æåˆ°ä¸€ä¸ªéå¸¸é‡è¦çš„ç‚¹ï¼š</p>

      <p>"å¯èƒ½æ˜¯å› ä¸ºæ€•éº»çƒ¦"</p>

      <p>è¿™æ„å‘³ç€ä½ åœ¨æ½œæ„è¯†åˆšå†’å¤´çš„æ—¶å€™ï¼Œå°±è¢«ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„ç³»ç»Ÿå‹åˆ¶äº†ï¼š</p>

      <ul>
        <li>æ€•éº»çƒ¦</li>
        <li>æ€•å¤šæ­¤ä¸€ä¸¾</li>
        <li>æ€•æ˜¾å¾—å•°å—¦</li>
        <li>æ€•åˆ¤æ–­é”™</li>
      </ul>

      <p><strong>ğŸ“Œ ä¹…è€Œä¹…ä¹‹ï¼Œå¤§è„‘ä¼šå­¦ä¼šï¼š</strong><br>"åˆ«æ€¥ç€æŠŠè¿™äº›æƒ³æ³•é€ä¸Šæ¥ï¼Œåæ­£ä¹Ÿä¸ä¼šè¢«ç”¨"</p>

      <p>äºæ˜¯å®ƒå‡ºç°å¾—æ›´å¿«ã€æ¶ˆå¤±å¾—æ›´å¿«ã€‚</p>

      <hr>

      <h3 id="why-afterwards">ä¸‰ã€ä¸ºä»€ä¹ˆä½ "äº‹ååè€Œèƒ½æƒ³åˆ°"ï¼Ÿ</h3>

      <p>å› ä¸ºäº‹åï¼š</p>

      <ul>
        <li>æ²¡æœ‰æ—¶é—´å‹åŠ›</li>
        <li>æ²¡æœ‰ç¤¾äº¤é£é™©</li>
        <li>æ²¡æœ‰èƒ½é‡æ¶ˆè€—</li>
      </ul>

      <p>ç³»ç»Ÿ2ç»ˆäºæœ‰ç©ºé—´ï¼ŒæŠŠç³»ç»Ÿ1çš„ä¸œè¥¿æ•´ç†å‡ºæ¥</p>

      <p>æ‰€ä»¥ä½ ä¼šæœ‰å¼ºçƒˆçš„æ‡Šæ¼æ„Ÿï¼š</p>

      <p>"æˆ‘å½“æ—¶å…¶å®æ˜¯æƒ³åˆ°çš„å•Šï¼"</p>

      <p>è¿™ä¸æ˜¯åè§ä¹‹æ˜ï¼Œè€Œæ˜¯å»¶è¿Ÿè®¿é—®ã€‚</p>

      <hr>

      <h2 id="solutions">è§£å†³æ–¹æ¡ˆ</h2>
      <p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ˜¯GPTç»™å‡ºçš„(aiå¤ªå¼ºå¤§äº†)</p>

      <hr>

      <h3 id="stage1">ä¸€ã€ç¬¬ä¸€é˜¶æ®µï¼ˆç¬¬ 1â€“2 å‘¨ï¼‰</h3>

      <p><strong>å»ºç«‹æ­£ç¡®è®¤çŸ¥ï¼šä½ ä¸æ˜¯æ…¢åŠæ‹ï¼Œè€Œæ˜¯è¢«æ‰“æ–­äº†</strong></p>

      <p><strong>ğŸ“˜ ä¹¦ç± 1ï¼šã€Šæ€è€ƒï¼Œå¿«ä¸æ…¢ã€‹</strong></p>

      <p>ç›®æ ‡ï¼šç¡®è®¤"é‚£ä¸€é—ªè€Œè¿‡çš„æ„Ÿè§‰"æ˜¯æœ‰æ¥æºã€æœ‰ä»·å€¼çš„</p>

      <p>é˜…è¯»é‡ç‚¹ï¼ˆä¸ç”¨å…¨è¯»ï¼‰</p>

      <ul>
        <li>ç³»ç»Ÿ1 vs ç³»ç»Ÿ2</li>
        <li>ç›´è§‰åˆ¤æ–­çš„å¯é æ€§ä¸è¾¹ç•Œ</li>
        <li>å†³ç­–åå·®çš„æˆå› </li>
      </ul>

      <hr>

      <p><strong>ğŸ§ª å®æ“ 1ï¼š3 ç§’æ½œæ„è¯†æ•æ‰è®­ç»ƒï¼ˆæ¯å¤©ï¼‰</strong></p>

      <p>é€‚ç”¨åœºæ™¯ï¼š</p>

      <ul>
        <li>å›æ¶ˆæ¯å‰</li>
        <li>åšé€‰æ‹©å‰</li>
        <li>æ¥åˆ«äººå»ºè®®æ—¶</li>
      </ul>

      <p>æ­¥éª¤ï¼š</p>

      <ol>
        <li>å‡†å¤‡è¡ŒåŠ¨å‰ï¼Œå¼ºåˆ¶åœ 3 ç§’</li>
        <li>é—®è‡ªå·±ä¸€å¥ï¼ˆå›ºå®šï¼‰ï¼š<br>"æˆ‘åˆšåˆšæ˜¯ä¸æ˜¯æœ‰ä¸€ä¸ªä¸å¤ªèˆ’æœ / ä¸å¤ªå¯¹çš„æ„Ÿè§‰ï¼Ÿ"</li>
        <li>ä¸åˆ†æï¼Œåªç­‰</li>
      </ol>

      <p><strong>ğŸ“Œ ç›®æ ‡ä¸æ˜¯é©¬ä¸Šåšå¯¹ï¼Œè€Œæ˜¯ï¼š</strong><br>ğŸ‘‰ è®©æ½œæ„è¯†çŸ¥é“ï¼šæˆ‘ä¼šå¬ä½ è¯´è¯</p>

      <hr>

      <h3 id="stage2">äºŒã€ç¬¬äºŒé˜¶æ®µï¼ˆç¬¬ 3â€“4 å‘¨ï¼‰</h3>

      <p><strong>æ‹†æ‰ä½ æœ€å®¹æ˜“è¢«å‡»ç©¿çš„åœ°æ–¹ï¼šç¤¾ä¼šå‹åŠ›</strong></p>

      <p><strong>ğŸ“˜ ä¹¦ç± 2ï¼šã€Šå½±å“åŠ›ã€‹</strong></p>

      <p>ç›®æ ‡ï¼šè¯†åˆ«"æˆ‘ä¸ºä»€ä¹ˆä¼šæ˜çŸ¥ä¸å¯¹è¿˜ç»§ç»­"çš„æœºåˆ¶</p>

      <p>é˜…è¯»é‡ç‚¹</p>

      <ul>
        <li>æ‰¿è¯ºä¸ä¸€è‡´æ€§</li>
        <li>äº’æƒ åŸåˆ™</li>
        <li>ç¤¾ä¼šè®¤åŒ</li>
      </ul>

      <p>ä½ ä¼šå‘ç°ï¼š<br>ğŸ‘‰ ä½ ä¹°æˆ¿çš„ä¾‹å­ï¼Œå‡ ä¹æ˜¯æ•™ç§‘ä¹¦çº§æ¡ˆä¾‹</p>

      <hr>

      <p><strong>ğŸ§ª å®æ“ 2ï¼šç¤¾ä¼šå‹åŠ›ç¿»è¯‘ç»ƒä¹ ï¼ˆé‡åˆ°å°±åšï¼‰</strong></p>

      <p>å½“ä½ è„‘ä¸­å‡ºç°ç±»ä¼¼å¿µå¤´ï¼š</p>

      <ul>
        <li>"åˆ«äººéƒ½ä»˜å‡ºè¿™ä¹ˆå¤šäº†"</li>
        <li>"ç°åœ¨åæ‚”æ˜¯ä¸æ˜¯ä¸å¥½"</li>
        <li>"ä¼šä¸ä¼šæ˜¾å¾—æˆ‘å¾ˆéº»çƒ¦"</li>
      </ul>

      <p>ç«‹åˆ»å†™ä¸‹ï¼ˆæˆ–å¿ƒé‡Œè¿‡ä¸€éï¼‰ï¼š</p>

      <p>"æˆ‘ç°åœ¨çœŸæ­£æ‹…å¿ƒçš„æ˜¯ï¼š______"</p>

      <p>ç„¶åå†è¡¥ä¸€å¥ï¼š</p>

      <p>"è¿™ä»¶äº‹çš„é•¿æœŸä»£ä»·ç”±è°æ‰¿æ‹…ï¼Ÿ"</p>

      <p><strong>ğŸ“Œ è¿™ä¸ªç»ƒä¹ çš„æ•ˆæœæ˜¯ï¼š</strong><br>ğŸ‘‰ æŠŠ"æƒ…ç»ªå‹åŠ›"ç¿»è¯‘æˆ"è´£ä»»å½’å±"</p>

      <hr>

      <h3 id="stage3">ä¸‰ã€ç¬¬ä¸‰é˜¶æ®µï¼ˆç¬¬ 5â€“6 å‘¨ï¼‰</h3>

      <p><strong>å­¦ä¼šä»€ä¹ˆæ—¶å€™è¯¥ä¿¡ç›´è§‰ï¼Œä»€ä¹ˆæ—¶å€™è¯¥åœ</strong></p>

      <p><strong>ğŸ“˜ ä¹¦ç± 3ï¼šã€Šç›´è§‰ã€‹ï¼ˆGerd Gigerenzerï¼‰</strong></p>

      <p>ç›®æ ‡ï¼šè®©ä½ ä¸å†çº ç»“"æˆ‘æ˜¯ä¸æ˜¯åœ¨èƒ¡æ€ä¹±æƒ³"</p>

      <p>é˜…è¯»é‡ç‚¹</p>

      <ul>
        <li>ç›´è§‰æ¥è‡ªå“ªé‡Œ</li>
        <li>ç®€å•è§„åˆ™æ¯”å¤æ‚åˆ†ææ›´å¯é çš„åœºæ™¯</li>
        <li>ä»€ä¹ˆæ—¶å€™å¿…é¡»æš‚åœ</li>
      </ul>

      <hr>

      <p><strong>ğŸ§ª å®æ“ 3ï¼šç›´è§‰åˆæ³•åŒ–æ¸…å•ï¼ˆæå‰å‡†å¤‡ï¼‰</strong></p>

      <p>æå‰å†™ä¸‹ä¸€å¼ æ¸…å•ï¼ˆéå¸¸é‡è¦ï¼‰ï¼š</p>

      <p>åªè¦å‡ºç°ä»¥ä¸‹ä»»æ„ä¸€æ¡ï¼Œæˆ‘å°±å¿…é¡»æš‚åœå†³ç­–</p>

      <p>ä¾‹å¦‚ï¼š</p>

      <ul>
        <li>èº«ä½“æ˜æ˜¾ä¸èˆ’æœï¼ˆèƒ¸å£ã€èƒƒã€ç´§ç»·ï¼‰</li>
        <li>åå¤æƒ³"ç®—äº†å§ï¼Œåˆ«éº»çƒ¦äº†"</li>
        <li>éœ€è¦ç”¨"åˆ«äººéƒ½è¿™ä¹ˆè¯´"æ¥å®‰æ…°è‡ªå·±</li>
        <li>è§‰å¾—"å¥½åƒå“ªé‡Œä¸å¯¹ï¼Œä½†è¯´ä¸ä¸Šæ¥"</li>
      </ul>

      <p><strong>ğŸ“Œ ä½ æ˜¯åœ¨ç»™ç›´è§‰æ³•å®šå¦å†³æƒã€‚</strong></p>

      <hr>

      <h3 id="stage4">å››ã€ç¬¬å››é˜¶æ®µï¼ˆç¬¬ 7â€“8 å‘¨ï¼‰</h3>

      <p><strong>ä¿®å¤æ ¹å±‚æ¨¡å¼ï¼šä½ ä¸éœ€è¦ä¸ºæ‰€æœ‰äººçš„æƒ…ç»ªä¹°å•</strong></p>

      <p><strong>ğŸ“˜ ä¹¦ç± 4ï¼šã€Šè¢«è®¨åŒçš„å‹‡æ°”ã€‹</strong></p>

      <p>ç›®æ ‡ï¼šæŠŠ"å¯¹åˆ«äººè´Ÿè´£"ä¸"å¯¹è‡ªå·±è´Ÿè´£"åˆ†å¼€</p>

      <p>é˜…è¯»é‡ç‚¹</p>

      <ul>
        <li>è¯¾é¢˜åˆ†ç¦»</li>
        <li>ä»–äººæœŸå¾…ä¸æ˜¯ä½ çš„ä¹‰åŠ¡</li>
        <li>å†²çªä¸æ˜¯å¤±è´¥</li>
      </ul>

      <p>âš ï¸ è¿™æœ¬ä¹¦å¯èƒ½ä¼šè®©ä½ ä¸èˆ’æœï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚</p>

      <hr>

      <p><strong>ğŸ§ª å®æ“ 4ï¼šè¾¹ç•Œè¯­è¨€é¢„æ¼”ï¼ˆæ¯å‘¨ 1 æ¬¡ï¼‰</strong></p>

      <p>æå‰å†™ä¸‹ 3 å¥ä½ å¯ä»¥ç”¨çš„"é€€å‡º / æ‹’ç» / æš‚åœ"è¡¨è¾¾ï¼š</p>

      <ul>
        <li>"è¿™ä¸ªé€‰æ‹©ä¸é€‚åˆæˆ‘å½“å‰é˜¶æ®µ"</li>
        <li>"æ„Ÿè°¢ä½ çš„å»ºè®®ï¼Œä½†æˆ‘å†³å®šæŒ‰è‡ªå·±çš„èŠ‚å¥æ¥"</li>
        <li>"æˆ‘éœ€è¦ä¸ºè¿™ä¸ªå†³å®šè´Ÿè´£ï¼Œæ‰€ä»¥ä¼šå†ç­‰ç­‰"</li>
      </ul>

      <p><strong>ğŸ“Œ å…³é”®ä¸æ˜¯è¯´å¾—å¤šå¥½ï¼Œè€Œæ˜¯ï¼š</strong><br>ğŸ‘‰ è®©å¤§è„‘çŸ¥é“ï¼šæ‹’ç»æ˜¯æœ‰å®‰å…¨å‡ºå£çš„</p>

      <hr>

      <h3 id="core-action">äº”ã€è´¯ç©¿å…¨ç¨‹çš„ä¸€ä¸ªæ ¸å¿ƒåŠ¨ä½œï¼ˆéå¸¸é‡è¦ï¼‰</h3>

      <p><strong>ğŸ““ æ½œæ„è¯†æ—¥å¿—ï¼ˆæ¯å¤© 3â€“5 åˆ†é’Ÿï¼‰</strong></p>

      <p>ä¸ç”¨å®Œæ•´å¥å­ï¼Œåªå†™å…³é”®è¯ï¼š</p>

      <ul>
        <li>ä»Šå¤©å“ªä¸€åˆ»æˆ‘"å…¶å®å·²ç»çŸ¥é“äº†"ï¼Ÿ</li>
        <li>æˆ‘å½“æ—¶æœ‰æ²¡æœ‰å‹ä½å®ƒï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
        <li>ä¸‹æ¬¡å‡ºç°è¿™ä¸ªä¿¡å·ï¼Œæˆ‘è¦åšçš„ç¬¬ä¸€åŠ¨ä½œæ˜¯ä»€ä¹ˆï¼Ÿ</li>
      </ul>

      <p><strong>ğŸ“Œ è¿™ä¸æ˜¯è®°å½•ç”Ÿæ´»ï¼Œæ˜¯åœ¨è®­ç»ƒè§‰å¯Ÿé€šé“ã€‚</strong></p>

      <hr>

      <h3 id="priority">å…­ã€å¦‚æœä½ åªèƒ½åšä¸€åŠï¼Œä¼˜å…ˆé¡ºåºæ˜¯è¿™ä¸ª</h3>

      <ol>
        <li>ã€Šæ€è€ƒï¼Œå¿«ä¸æ…¢ã€‹ + å®æ“ 1</li>
        <li>ã€Šå½±å“åŠ›ã€‹ + å®æ“ 2</li>
        <li>å…¶ä»–è§†ç²¾åŠ›è€Œå®š</li>
      </ol>

      <p>å°±ç®—åªåšåˆ°å‰ä¸¤æ­¥ï¼Œ<br>ä½ åœ¨é‡å¤§å†³ç­–ä¸Šçš„å¤±è¯¯ç‡éƒ½ä¼šæ˜æ˜¾ä¸‹é™ã€‚</p>

      <hr>

      <h3 id="final-words">æœ€åæˆ‘æƒ³å¯¹ä½ è¯´ä¸€å¥å®è¯</h3>

      <p>ä½ ç°åœ¨çš„é—®é¢˜ï¼Œä¸æ˜¯ç¼ºæ–¹æ³•ï¼Œè€Œæ˜¯ç»ˆäºèµ°åˆ°äº†ä¸€ä¸ª"è¦ä¸ºè‡ªå·±è´Ÿè´£"çš„é˜¶æ®µã€‚</p>
      <h2 id="plans">æˆ‘çš„åç»­è®¡åˆ’</h2>
      <hr>
      <p>æˆ‘å‡†å¤‡åˆ¶å®šä¸€ä¸ªchecklistï¼Œå¯¹è‡ªå·±æ¯å¤©çš„å†³ç­–è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹çœ‹è‡ªå·±æ˜¯å¦éµå¾ªäº†è¿™äº›åŸåˆ™ã€‚</p>

      <div class="tracking-table-container">
        <table class="tracking-table" id="trackingTable">
          <thead>
            <tr>
              <th>æ—¥æœŸ</th>
              <th>å…³é”®å†³ç­–/æ²Ÿé€šå‡ºç°?</th>
              <th>æ˜¯å¦æ‰§è¡Œ"3ç§’åœé¡¿"</th>
              <th>æ˜¯å¦æ•æ‰åˆ°æ½œæ„è¯†ä¿¡å·</th>
              <th>æ˜¯å¦å°Šé‡è¯¥ä¿¡å·</th>
              <th>æœªæ‰§è¡ŒåŸå› (å¦‚æœ‰)</th>
              <th>å½“å¤©ä¸€å¥åæ€</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody id="trackingTableBody">
            <!-- è¡Œå°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
          </tbody>
        </table>
        <div class="tracking-table-actions">
          <button class="add-btn admin-only" onclick="addTrackingRow()">+ æ·»åŠ è®°å½•</button>
          <button class="preview-btn" onclick="previewTrackingData()">ğŸ‘ï¸ é¢„è§ˆ</button>
          <button class="save-btn admin-only" onclick="confirmAndSave()">ğŸ’¾ ä¿å­˜</button>
          <button class="show-more-btn" id="showMoreBtn" onclick="showMoreRows()" style="display: none;">æ˜¾ç¤ºæ›´å¤š (3æ¡)</button>
        </div>
      </div>

      <!-- é¢„è§ˆæ¨¡æ€æ¡† -->
      <div class="preview-modal" id="previewModal">
        <div class="preview-modal-content">
          <div class="preview-modal-header">
            <h3>é¢„è§ˆæ•°æ®</h3>
            <button class="preview-modal-close" onclick="closePreview()">Ã—</button>
          </div>
          <div id="previewContent">
            <!-- é¢„è§ˆå†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
          </div>
          <div class="preview-modal-actions">
            <button class="cancel-btn" onclick="closePreview()">å–æ¶ˆ</button>
            <button class="confirm-btn" onclick="confirmSave()">ç¡®è®¤ä¿å­˜</button>
          </div>
        </div>
      </div>

      <a href="../thinking/" class="back-link">â† è¿”å›æ€ç»´æ¼«æ­¥</a>
    </section>

    <!-- è¯„è®ºåŒºåŸŸ -->
    <section class="comments-section">
      <div class="giscus"></div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Cosmos of WW. è®°å½•æ€è€ƒï¼Œåˆ†äº«æˆé•¿ã€‚</p>
  </footer>

  <script src="../js/lang-switcher.js"></script>
  <!-- è®¤è¯æ¨¡å— -->
  <script src="../js/auth.js"></script>
  <!-- Giscus è¯„è®ºç³»ç»Ÿ -->
  <script src="https://giscus.app/client.js"
          data-repo="cosmos-wonder/cosmos-wonder.github.io"
          data-repo-id="R_kgDOQkSejw"
          data-category="General"
          data-category-id="DIC_kwDOQkSej84CzySo"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="preferred_color_scheme"
          data-lang="zh-CN"
          crossorigin="anonymous"
          async>
  </script>
  <script>
    // åç«¯APIåœ°å€ - è‡ªåŠ¨æ£€æµ‹å¼€å‘/ç”Ÿäº§ç¯å¢ƒ
    const API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
      ? 'http://localhost:8787'  // æœ¬åœ°å¼€å‘ç¯å¢ƒ
      : 'https://blog-backend.cxmwwb.workers.dev';  // ç”Ÿäº§ç¯å¢ƒ
    
    // è¿½è¸ªè¡¨æ ¼ç®¡ç†
    const STORAGE_KEY = 'subconscious_tracking_data'; // ä¿ç•™ä½œä¸ºå¤‡ä»½
    let rowCounter = 0;
    let visibleRowCount = 3; // é»˜è®¤æ˜¾ç¤ºçš„è¡Œæ•°

    // è·å– API è¯·æ±‚å¤´ï¼ˆåŒ…å«è®¤è¯ tokenï¼‰
    function getAuthHeaders() {
      const headers = {
        'Content-Type': 'application/json',
      };
      
      if (window.auth && window.auth.getAuthToken()) {
        headers['Authorization'] = `Bearer ${window.auth.getAuthToken()}`;
      }
      
      return headers;
    }

    // æ›´æ–° UI æƒé™æ§åˆ¶
    function updateUIForRole() {
      const isAdmin = window.auth && window.auth.isAdmin();
      const trackingTable = document.getElementById('trackingTable');
      
      if (trackingTable) {
        if (isAdmin) {
          trackingTable.classList.remove('read-only');
        } else {
          trackingTable.classList.add('read-only');
        }
      }

      // æ˜¾ç¤º/éšè— admin-only æŒ‰é’®
      document.querySelectorAll('.admin-only').forEach(el => {
        el.style.display = isAdmin ? '' : 'none';
      });
    }

    // æ›´æ–°è®¤è¯ UI
    function updateAuthUI() {
      const user = window.auth ? window.auth.getCurrentUser() : null;
      const role = window.auth ? window.auth.getViewMode() : 'guest';
      const isAdmin = window.auth ? window.auth.isAdmin() : false;

      const loginBtn = document.getElementById('loginBtn');
      const userInfo = document.getElementById('userInfo');
      const userName = document.getElementById('userName');
      const userAvatar = document.getElementById('userAvatar');
      const roleBadge = document.getElementById('roleBadge');
      const toggleModeBtn = document.getElementById('toggleModeBtn');

      if (user) {
        loginBtn.style.display = 'none';
        userInfo.style.display = 'flex';
        userName.textContent = user.name || user.login;
        userAvatar.src = user.avatar_url;
        userAvatar.alt = user.login;
        roleBadge.textContent = role === 'admin' ? 'ç®¡ç†å‘˜' : 'è®¿å®¢';
        roleBadge.className = `role-badge ${role}`;
        
        // åªæœ‰ admin å¯ä»¥åˆ‡æ¢æ¨¡å¼
        if (window.auth.getCurrentRole() === 'admin') {
          toggleModeBtn.style.display = 'inline-block';
          toggleModeBtn.textContent = role === 'admin' ? 'åˆ‡æ¢åˆ°è®¿å®¢æ¨¡å¼' : 'åˆ‡æ¢åˆ°ç®¡ç†å‘˜æ¨¡å¼';
        } else {
          toggleModeBtn.style.display = 'none';
        }
      } else {
        loginBtn.style.display = 'inline-block';
        userInfo.style.display = 'none';
      }

      // æ›´æ–° UI æƒé™æ§åˆ¶
      updateUIForRole();
    }

    // ç›‘å¬è®¤è¯çŠ¶æ€å˜åŒ–
    document.addEventListener('authStateChanged', () => {
      updateAuthUI();
      // é‡æ–°åŠ è½½æ•°æ®
      if (typeof loadTrackingData === 'function') {
        loadTrackingData();
      }
    });

    // ç”Ÿæˆå”¯ä¸€ID
    function generateRowId() {
      return 'row_' + Date.now() + '_' + (++rowCounter);
    }

    // åˆ›å»ºä¸€è¡Œ
    function createTrackingRow(data = {}) {
      // ä½¿ç”¨æ•°æ®åº“ ID æˆ–ç”Ÿæˆä¸´æ—¶ ID
      const rowId = data.db_id || data.id || generateRowId();
      const today = new Date().toISOString().split('T')[0];
      
      // è½¬æ¢æ•°æ®åº“æ ¼å¼åˆ°å‰ç«¯æ ¼å¼
      const dateValue = data.record_date || data.date || today;
      const decisionValue = data.has_decision !== undefined ? (data.has_decision ? 'yes' : 'no') : (data.decision || '');
      const pauseValue = data.did_pause !== undefined ? (data.did_pause ? 'yes' : 'no') : (data.pause || '');
      const signalValue = data.captured_signal !== undefined ? (data.captured_signal ? 'yes' : 'no') : (data.signal || '');
      const respectValue = data.respected_signal !== undefined ? (data.respected_signal ? 'yes' : 'no') : (data.respect || '');
      
      const row = document.createElement('tr');
      row.id = rowId;
      row.setAttribute('data-db-id', data.db_id || '');
      row.setAttribute('data-date', dateValue); // ç”¨äºæ’åº
      row.innerHTML = `
        <td>
          <input type="date" class="date-input" value="${dateValue}" onchange="handleDateChange(this, '${rowId}')">
        </td>
        <td>
          <div class="yes-no-group">
            <label><input type="radio" name="decision_${rowId}" value="yes" ${decisionValue === 'yes' ? 'checked' : ''} onchange="markAsChanged()"> æ˜¯</label>
            <label><input type="radio" name="decision_${rowId}" value="no" ${decisionValue === 'no' ? 'checked' : ''} onchange="markAsChanged()"> å¦</label>
          </div>
        </td>
        <td>
          <div class="yes-no-group">
            <label><input type="radio" name="pause_${rowId}" value="yes" ${pauseValue === 'yes' ? 'checked' : ''} onchange="markAsChanged()"> âœ…</label>
            <label><input type="radio" name="pause_${rowId}" value="no" ${pauseValue === 'no' ? 'checked' : ''} onchange="markAsChanged()"> âŒ</label>
          </div>
        </td>
        <td>
          <div class="yes-no-group">
            <label><input type="radio" name="signal_${rowId}" value="yes" ${signalValue === 'yes' ? 'checked' : ''} onchange="markAsChanged()"> âœ…</label>
            <label><input type="radio" name="signal_${rowId}" value="no" ${signalValue === 'no' ? 'checked' : ''} onchange="markAsChanged()"> âŒ</label>
          </div>
        </td>
        <td>
          <div class="yes-no-group">
            <label><input type="radio" name="respect_${rowId}" value="yes" ${respectValue === 'yes' ? 'checked' : ''} onchange="markAsChanged()"> âœ…</label>
            <label><input type="radio" name="respect_${rowId}" value="no" ${respectValue === 'no' ? 'checked' : ''} onchange="markAsChanged()"> âŒ</label>
          </div>
        </td>
        <td>
          <input type="text" class="reason-input" placeholder="ä¾‹:å½“æ—¶å…¶å®çŠ¹è±«äº†" value="${data.reason || ''}" onchange="markAsChanged()">
        </td>
        <td>
          <textarea class="reflection-input" placeholder="å†™ä¸‹ä»Šå¤©çš„åæ€..." onchange="markAsChanged()">${data.reflection || ''}</textarea>
        </td>
        <td>
          <button class="delete-btn admin-only" onclick="deleteTrackingRow('${rowId}')">åˆ é™¤</button>
        </td>
      `;
      return row;
    }

    // æ ‡è®°æ•°æ®å·²ä¿®æ”¹
    let hasUnsavedChanges = false;

    function markAsChanged() {
      hasUnsavedChanges = true;
    }

    // æŒ‰æ—¥æœŸæ’åºè¡Œï¼ˆé™åºï¼Œæœ€æ–°çš„åœ¨å‰ï¼‰
    function sortRowsByDate() {
      const tbody = document.getElementById('trackingTableBody');
      const rows = Array.from(tbody.querySelectorAll('tr'));
      
      rows.sort((a, b) => {
        const dateA = a.querySelector('.date-input').value || '';
        const dateB = b.querySelector('.date-input').value || '';
        return dateB.localeCompare(dateA); // é™åºæ’åºï¼šæœ€æ–°çš„åœ¨å‰
      });
      
      // æ¸…ç©º tbody å¹¶é‡æ–°æ·»åŠ æ’åºåçš„è¡Œ
      tbody.innerHTML = '';
      rows.forEach(row => {
        tbody.appendChild(row);
        row.setAttribute('data-date', row.querySelector('.date-input').value);
      });
      
      // æ›´æ–°å¯è§è¡Œæ•°
      updateVisibleRows();
    }

    // å¤„ç†æ—¥æœŸå˜æ›´
    function handleDateChange(input, rowId) {
      const row = document.getElementById(rowId);
      if (row) {
        row.setAttribute('data-date', input.value);
        // é‡æ–°æ’åº
        sortRowsByDate();
      }
      markAsChanged();
    }

    // æ·»åŠ ä¸€è¡Œï¼ˆé»˜è®¤ä»Šå¤©æ—¥æœŸï¼Œæ’å…¥åˆ°æœ€å‰é¢ï¼Œå› ä¸ºä»Šå¤©åº”è¯¥æ˜¯æœ€æ–°çš„ï¼‰
    function addTrackingRow() {
      // æ£€æŸ¥æƒé™
      if (!window.auth || !window.auth.isAdmin()) {
        alert('åªæœ‰ç®¡ç†å‘˜å¯ä»¥æ·»åŠ è®°å½•');
        return;
      }
      const tbody = document.getElementById('trackingTableBody');
      const today = new Date().toISOString().split('T')[0];
      const row = createTrackingRow({ date: today });
      
      // ç›´æ¥æ’å…¥åˆ°æœ€å‰é¢ï¼ˆå› ä¸ºä»Šå¤©åº”è¯¥æ˜¯æœ€æ–°çš„æ—¥æœŸï¼‰
      const firstRow = tbody.querySelector('tr');
      if (firstRow) {
        tbody.insertBefore(row, firstRow);
      } else {
        tbody.appendChild(row);
      }
      
      row.setAttribute('data-date', today);
      markAsChanged();
      
      // é‡æ–°æ’åºä»¥ç¡®ä¿æ­£ç¡®ä½ç½®ï¼ˆå¦‚æœæ—¥æœŸä¸æ˜¯ä»Šå¤©ï¼Œä¼šæ’åˆ°æ­£ç¡®ä½ç½®ï¼‰
      sortRowsByDate();
    }

    // æ›´æ–°å¯è§è¡Œæ•°
    function updateVisibleRows() {
      const tbody = document.getElementById('trackingTableBody');
      const rows = tbody.querySelectorAll('tr');
      const showMoreBtn = document.getElementById('showMoreBtn');
      
      // ç§»é™¤æ‰€æœ‰ hidden-row ç±»
      rows.forEach(row => row.classList.remove('hidden-row'));
      
      // å¦‚æœè¡Œæ•°è¶…è¿‡é»˜è®¤æ˜¾ç¤ºæ•°é‡ï¼Œéšè—å¤šä½™çš„è¡Œ
      if (rows.length > visibleRowCount) {
        for (let i = visibleRowCount; i < rows.length; i++) {
          rows[i].classList.add('hidden-row');
        }
        showMoreBtn.style.display = 'inline-block';
        const remaining = rows.length - visibleRowCount;
        showMoreBtn.textContent = `æ˜¾ç¤ºæ›´å¤š (${Math.min(remaining, 3)}æ¡)`;
      } else {
        showMoreBtn.style.display = 'none';
      }
    }

    // æ˜¾ç¤ºæ›´å¤šè¡Œ
    function showMoreRows() {
      visibleRowCount += 3;
      updateVisibleRows();
    }
    
    // åˆ é™¤ä¸€è¡Œ
    async function deleteTrackingRow(rowId) {
      if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) {
        const row = document.getElementById(rowId);
        if (!row) return;
        
        const dbId = row.getAttribute('data-db-id');
        
        // å¦‚æœå­˜åœ¨æ•°æ®åº“ IDï¼Œä»APIåˆ é™¤
        if (dbId) {
          try {
            // æ£€æŸ¥æƒé™
        if (!window.auth || !window.auth.isAdmin()) {
          alert('åªæœ‰ç®¡ç†å‘˜å¯ä»¥åˆ é™¤æ•°æ®');
          return;
        }

        const response = await fetch(`${API_BASE_URL}/api/subconscious-tracking?id=${encodeURIComponent(dbId)}`, {
          method: 'DELETE',
          headers: getAuthHeaders(),
        });
            
            if (!response.ok) {
              const error = await response.text();
              console.error('åˆ é™¤APIè®°å½•å¤±è´¥:', error);
              alert('åˆ é™¤å¤±è´¥: ' + error);
              return;
            }
          } catch (e) {
            console.error('åˆ é™¤æ“ä½œå¼‚å¸¸:', e);
          }
        }
        
        // ä»ç•Œé¢åˆ é™¤
        row.remove();
        
        // æ›´æ–°å¯è§è¡Œæ•°
        updateVisibleRows();
        
        // ä¿å­˜åˆ° localStorage ä½œä¸ºå¤‡ä»½
        saveToLocalStorage();
      }
    }

    // å°†å‰ç«¯æ•°æ®æ ¼å¼è½¬æ¢ä¸ºæ•°æ®åº“æ ¼å¼
    function convertToDbFormat(rowData) {
      return {
        record_date: rowData.date,
        has_decision: rowData.decision === 'yes' ? true : (rowData.decision === 'no' ? false : null),
        did_pause: rowData.pause === 'yes' ? true : (rowData.pause === 'no' ? false : null),
        captured_signal: rowData.signal === 'yes' ? true : (rowData.signal === 'no' ? false : null),
        respected_signal: rowData.respect === 'yes' ? true : (rowData.respect === 'no' ? false : null),
        reason: rowData.reason || null,
        reflection: rowData.reflection || null
      };
    }

    // é¢„è§ˆæ•°æ®
    function previewTrackingData() {
      const tbody = document.getElementById('trackingTableBody');
      const rows = tbody.querySelectorAll('tr');
      const data = [];
      
      rows.forEach(row => {
        const rowData = {
          date: row.querySelector('.date-input').value,
          decision: row.querySelector(`input[name^="decision_"]:checked`)?.value || 'æœªé€‰æ‹©',
          pause: row.querySelector(`input[name^="pause_"]:checked`)?.value || 'æœªé€‰æ‹©',
          signal: row.querySelector(`input[name^="signal_"]:checked`)?.value || 'æœªé€‰æ‹©',
          respect: row.querySelector(`input[name^="respect_"]:checked`)?.value || 'æœªé€‰æ‹©',
          reason: row.querySelector('.reason-input').value || 'æ— ',
          reflection: row.querySelector('.reflection-input').value || 'æ— '
        };
        
        if (rowData.date) {
          data.push(rowData);
        }
      });
      
      if (data.length === 0) {
        alert('æ²¡æœ‰å¯é¢„è§ˆçš„æ•°æ®ï¼Œè¯·å…ˆæ·»åŠ è®°å½•ã€‚');
        return;
      }
      
      // æ˜¾ç¤ºé¢„è§ˆ
      const previewContent = document.getElementById('previewContent');
      let html = '<table class="preview-table"><thead><tr>';
      html += '<th>æ—¥æœŸ</th><th>å…³é”®å†³ç­–/æ²Ÿé€šå‡ºç°?</th><th>æ˜¯å¦æ‰§è¡Œ"3ç§’åœé¡¿"</th>';
      html += '<th>æ˜¯å¦æ•æ‰åˆ°æ½œæ„è¯†ä¿¡å·</th><th>æ˜¯å¦å°Šé‡è¯¥ä¿¡å·</th><th>æœªæ‰§è¡ŒåŸå› </th><th>å½“å¤©ä¸€å¥åæ€</th>';
      html += '</tr></thead><tbody>';
      
      data.forEach(row => {
        html += '<tr>';
        html += `<td>${row.date}</td>`;
        html += `<td>${row.decision === 'yes' ? 'æ˜¯' : row.decision === 'no' ? 'å¦' : 'æœªé€‰æ‹©'}</td>`;
        html += `<td>${row.pause === 'yes' ? 'âœ…' : row.pause === 'no' ? 'âŒ' : 'æœªé€‰æ‹©'}</td>`;
        html += `<td>${row.signal === 'yes' ? 'âœ…' : row.signal === 'no' ? 'âŒ' : 'æœªé€‰æ‹©'}</td>`;
        html += `<td>${row.respect === 'yes' ? 'âœ…' : row.respect === 'no' ? 'âŒ' : 'æœªé€‰æ‹©'}</td>`;
        html += `<td>${row.reason}</td>`;
        html += `<td>${row.reflection}</td>`;
        html += '</tr>';
      });
      
      html += '</tbody></table>';
      previewContent.innerHTML = html;
      
      // æ˜¾ç¤ºæ¨¡æ€æ¡†
      document.getElementById('previewModal').classList.add('active');
    }

    // å…³é—­é¢„è§ˆ
    function closePreview() {
      document.getElementById('previewModal').classList.remove('active');
    }

    // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
    document.addEventListener('click', function(e) {
      const modal = document.getElementById('previewModal');
      if (e.target === modal) {
        closePreview();
      }
    });

    // ç¡®è®¤å¹¶ä¿å­˜
    function confirmAndSave() {
      // æ£€æŸ¥æƒé™
      if (!window.auth || !window.auth.isAdmin()) {
        alert('åªæœ‰ç®¡ç†å‘˜å¯ä»¥ä¿å­˜æ•°æ®');
        return;
      }
      const tbody = document.getElementById('trackingTableBody');
      const rows = tbody.querySelectorAll('tr');
      
      if (rows.length === 0) {
        alert('æ²¡æœ‰å¯ä¿å­˜çš„æ•°æ®ã€‚');
        return;
      }
      
      // æ£€æŸ¥æ˜¯å¦æœ‰æœªå¡«å†™æ—¥æœŸçš„è®°å½•
      let hasInvalidData = false;
      rows.forEach(row => {
        if (!row.querySelector('.date-input').value) {
          hasInvalidData = true;
        }
      });
      
      if (hasInvalidData) {
        if (!confirm('å­˜åœ¨æœªå¡«å†™æ—¥æœŸçš„è®°å½•ï¼Œå°†è·³è¿‡è¿™äº›è®°å½•ã€‚æ˜¯å¦ç»§ç»­ä¿å­˜ï¼Ÿ')) {
          return;
        }
      }
      
      if (confirm('ç¡®å®šè¦ä¿å­˜æ‰€æœ‰æ•°æ®åˆ°æ•°æ®åº“å—ï¼Ÿ')) {
        saveTrackingData().then(() => {
          alert('æ•°æ®ä¿å­˜æˆåŠŸï¼');
          hasUnsavedChanges = false;
        }).catch(error => {
          alert('ä¿å­˜å¤±è´¥ï¼š' + error.message);
        });
      }
    }

    // ä»é¢„è§ˆæ¨¡æ€æ¡†ç¡®è®¤ä¿å­˜
    function confirmSave() {
      closePreview();
      confirmAndSave();
    }

    // ä¿å­˜æ•°æ®åˆ°åç«¯APIå’ŒlocalStorage
    async function saveTrackingData() {
      const tbody = document.getElementById('trackingTableBody');
      const rows = tbody.querySelectorAll('tr');
      
      // å…ˆä¿å­˜åˆ° localStorage ä½œä¸ºå¤‡ä»½
      saveToLocalStorage();
      
      try {
        for (const row of rows) {
          const dbId = row.getAttribute('data-db-id');
          const rowData = {
            id: row.id,
            db_id: dbId,
            date: row.querySelector('.date-input').value,
            decision: row.querySelector(`input[name^="decision_"]:checked`)?.value || '',
            pause: row.querySelector(`input[name^="pause_"]:checked`)?.value || '',
            signal: row.querySelector(`input[name^="signal_"]:checked`)?.value || '',
            respect: row.querySelector(`input[name^="respect_"]:checked`)?.value || '',
            reason: row.querySelector('.reason-input').value,
            reflection: row.querySelector('.reflection-input').value
          };
          
          if (!rowData.date) {
            console.warn('è·³è¿‡æ²¡æœ‰æ—¥æœŸçš„è®°å½•');
            continue;
          }
          
          const dbData = convertToDbFormat(rowData);
          
          // æ£€æŸ¥æƒé™
          if (!window.auth || !window.auth.isAdmin()) {
            alert('åªæœ‰ç®¡ç†å‘˜å¯ä»¥ä¿å­˜æ•°æ®');
            return;
          }

          // è°ƒç”¨åç«¯APIä¿å­˜æ•°æ®
          const response = await fetch(`${API_BASE_URL}/api/subconscious-tracking`, {
            method: 'POST',
            headers: getAuthHeaders(),
            body: JSON.stringify(dbData),
          });
          
          if (!response.ok) {
            const error = await response.text();
            console.error('ä¿å­˜è®°å½•å¤±è´¥:', error);
            throw new Error(error);
          }
          
          const data = await response.json();
          if (data && data.id) {
            // æ›´æ–°è¡Œçš„ data-db-id å±æ€§
            row.setAttribute('data-db-id', data.id);
            row.id = 'row_' + data.id;
          }
        }
      } catch (e) {
        console.error('ä¿å­˜åˆ°APIå¤±è´¥:', e);
        throw e;
      }
    }

    // ä¿å­˜åˆ° localStorageï¼ˆä½œä¸ºå¤‡ä»½ï¼‰
    function saveToLocalStorage() {
      const tbody = document.getElementById('trackingTableBody');
      const rows = tbody.querySelectorAll('tr');
      const data = [];

      rows.forEach(row => {
        const rowData = {
          id: row.id,
          db_id: row.getAttribute('data-db-id'),
          date: row.querySelector('.date-input').value,
          decision: row.querySelector(`input[name^="decision_"]:checked`)?.value || '',
          pause: row.querySelector(`input[name^="pause_"]:checked`)?.value || '',
          signal: row.querySelector(`input[name^="signal_"]:checked`)?.value || '',
          respect: row.querySelector(`input[name^="respect_"]:checked`)?.value || '',
          reason: row.querySelector('.reason-input').value,
          reflection: row.querySelector('.reflection-input').value
        };
        data.push(rowData);
      });

      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      } catch (e) {
        console.error('ä¿å­˜åˆ° localStorage å¤±è´¥:', e);
      }
    }

    // ä»åç«¯APIåŠ è½½æ•°æ®
    async function loadTrackingData() {
      let data = [];
      
      // å°è¯•ä»APIåŠ è½½
      try {
        const response = await fetch(`${API_BASE_URL}/api/subconscious-tracking`, {
          headers: getAuthHeaders(),
        });
        
        if (response.ok) {
          const dbData = await response.json();
          
          if (dbData && dbData.length > 0) {
            // è½¬æ¢æ•°æ®åº“æ ¼å¼åˆ°å‰ç«¯æ ¼å¼
            data = dbData.map(item => ({
              db_id: item.id,
              id: 'row_' + item.id,
              date: item.record_date,
              decision: item.has_decision === true ? 'yes' : (item.has_decision === false ? 'no' : ''),
              pause: item.did_pause === true ? 'yes' : (item.did_pause === false ? 'no' : ''),
              signal: item.captured_signal === true ? 'yes' : (item.captured_signal === false ? 'no' : ''),
              respect: item.respected_signal === true ? 'yes' : (item.respected_signal === false ? 'no' : ''),
              reason: item.reason || '',
              reflection: item.reflection || ''
            }));
          } else {
            // APIè¿”å›ç©ºæ•°æ®ï¼Œå°è¯•ä» localStorage åŠ è½½
            data = loadFromLocalStorage();
          }
        } else {
          console.error('ä»APIåŠ è½½å¤±è´¥:', response.status);
          // å¦‚æœAPIåŠ è½½å¤±è´¥ï¼Œå°è¯•ä» localStorage åŠ è½½
          data = loadFromLocalStorage();
        }
      } catch (e) {
        console.error('åŠ è½½æ•°æ®å¼‚å¸¸:', e);
        // å¦‚æœåŠ è½½å¼‚å¸¸ï¼Œä» localStorage åŠ è½½
        data = loadFromLocalStorage();
      }
      
      // æŒ‰æ—¥æœŸæ’åºæ•°æ®ï¼ˆé™åºï¼Œæœ€æ–°çš„åœ¨å‰ï¼‰
      data.sort((a, b) => {
        const dateA = a.record_date || a.date || '';
        const dateB = b.record_date || b.date || '';
        return dateB.localeCompare(dateA); // é™åºæ’åºï¼šæœ€æ–°çš„åœ¨å‰
      });
      
      // æ¸²æŸ“æ•°æ®
      const tbody = document.getElementById('trackingTableBody');
      tbody.innerHTML = '';
      
      if (data.length > 0) {
        data.forEach(rowData => {
          const row = createTrackingRow(rowData);
          tbody.appendChild(row);
        });
      } else {
        // å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œæ·»åŠ ä¸€è¡Œç¤ºä¾‹ï¼ˆé»˜è®¤ä»Šå¤©ï¼‰
        addTrackingRow();
      }
      
      // æ›´æ–°å¯è§è¡Œæ•°
      updateVisibleRows();
    }

    // ä» localStorage åŠ è½½æ•°æ®ï¼ˆå¤‡ç”¨ï¼‰
    function loadFromLocalStorage() {
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          return JSON.parse(saved);
        }
      } catch (e) {
        console.error('ä» localStorage åŠ è½½å¤±è´¥:', e);
      }
      return [];
    }


    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', async function() {
      // ç­‰å¾…è®¤è¯æ¨¡å—åˆå§‹åŒ–
      await new Promise(resolve => {
        if (window.auth) {
          resolve();
        } else {
          const checkAuth = setInterval(() => {
            if (window.auth) {
              clearInterval(checkAuth);
              resolve();
            }
          }, 100);
        }
      });

      updateAuthUI();
      loadTrackingData();
    });
  </script>
</body>
</html>

